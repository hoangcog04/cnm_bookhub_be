<link rel="stylesheet" href="css/pages/order_detail.css">

<div class="page-order-detail">
    <!-- Header -->
    <div class="page-header">
        <div class="header-left">
            <div class="d-flex align-items-center">
                <button class="btn btn-secondary mr-3" onclick="Router.navigate('orders')"
                    style="width: 40px; height: 40px; padding: 0; display: flex; align-items: center; justify-content: center;">
                    <i class="fa-solid fa-arrow-left"></i>
                </button>
                <div>
                    <h2 class="page-title">Chi tiết Đơn hàng <span id="order-id-display"
                            class="text-primary">#ORD-8823</span></h2>
                    <p class="text-subtitle" id="order-date-display">Xem thông tin chi tiết và cập nhật trạng thái đơn
                        hàng.</p>
                </div>
            </div>
        </div>
        <div class="header-actions" style="display: flex; gap: 10px;">
            <button class="btn btn-secondary" onclick="OrderDetailPage.printOrder()">
                <i class="fa-solid fa-print"></i> In hóa đơn
            </button>
            <button class="btn btn-danger" id="btn-cancel-order" style="display: none;">
                <i class="fa-solid fa-xmark"></i> Hủy đơn hàng
            </button>
        </div>
    </div>

    <!-- Grid Layout -->
    <div class="order-detail-grid">

        <!-- LEFT COLUMN (SIDEBAR) -->
        <div class="order-detail-left">

            <!-- Customer Card -->
            <div class="card">
                <div class="card-body">
                    <div class="customer-profile">
                        <div class="user-avatar-lg" id="cust-avatar">N</div>
                        <h3 class="customer-name" id="cust-name-detail">Nguyễn Văn A</h3>
                        <p class="customer-type">Khách hàng thân thiết</p>
                    </div>

                    <div style="border-top: 1px solid #f1f5f9; margin: 20px -20px; padding-top: 20px;"></div>

                    <div class="info-item">
                        <i class="fa-regular fa-envelope"></i>
                        <div class="info-content">
                            <label>Email</label>
                            <div id="cust-email-detail">nguyenvana@example.com</div>
                        </div>
                    </div>

                    <div class="info-item">
                        <i class="fa-solid fa-phone"></i>
                        <div class="info-content">
                            <label>Số điện thoại</label>
                            <div id="cust-phone-detail">0912 345 678</div>
                        </div>
                    </div>

                    <div class="info-item">
                        <i class="fa-solid fa-location-dot"></i>
                        <div class="info-content">
                            <label>Địa chỉ giao hàng</label>
                            <div id="shipping-address-detail">Số 123, Đường Xuân Thủy, Phường Dịch Vọng Hậu, Quận Cầu
                                Giấy, Hà Nội</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Order General Info -->
            <div class="card">
                <div class="card-header">
                    <h3><i class="fa-solid fa-circle-info text-primary mr-2"></i> Thông tin đơn hàng</h3>
                </div>
                <div class="card-body">
                    <div class="info-item">
                        <div class="info-content" style="width: 100%;">
                            <label>Mã đơn hàng</label>
                            <div id="order-ref-detail" style="font-weight: 700;">#ORD-8823</div>
                        </div>
                    </div>

                    <div class="info-item">
                        <div class="info-content" style="width: 100%;">
                            <label>Ngày đặt hàng</label>
                            <div id="order-created-at-detail">22/10/2023 - 14:30</div>
                        </div>
                    </div>

                    <div class="info-item">
                        <div class="info-content" style="width: 100%;">
                            <label>Phương thức thanh toán</label>
                            <div id="payment-method-display"><i class="fa-solid fa-money-bill-1"></i> Thanh toán khi
                                nhận hàng (COD)</div>
                        </div>
                    </div>

                    <div style="margin-top: 20px;">
                        <label style="font-size: 12px; color: #64748b; display: block; margin-bottom: 8px;">Cập nhật
                            trạng thái</label>
                        <div style="display: flex; gap: 8px;">
                            <select id="order-status-update" class="form-control" style="flex: 1;">
                                <option value="pending">Chờ xử lý</option>
                                <option value="shipping">Đang vận chuyển</option>
                                <option value="completed">Thành công</option>
                                <option value="cancelled">Đã hủy</option>
                            </select>
                            <button class="btn btn-primary" id="btn-update-status" style="width: 40px; padding: 0;">
                                <i class="fa-solid fa-floppy-disk"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

        </div>

        <!-- RIGHT COLUMN (MAIN) -->
        <div class="order-detail-right">

            <!-- Product List -->
            <div class="card">
                <div class="card-header">
                    <h3><i class="fa-solid fa-cart-shopping text-primary mr-2"></i> Danh sách sản phẩm</h3>
                    <span class="badge badge-info" id="items-count-badge"
                        style="background: rgba(59, 130, 246, 0.1); color: #3b82f6; border-radius: 20px; padding: 4px 12px;">3
                        sản phẩm</span>
                </div>
                <div class="card-body p-0">
                    <table class="table table-custom mb-0">
                        <thead>
                            <tr>
                                <th>Sản phẩm</th>
                                <th class="text-center">Số lượng</th>
                                <th class="text-right">Đơn giá</th>
                                <th class="text-right">Thành tiền</th>
                            </tr>
                        </thead>
                        <tbody id="order-items-body">
                            <!-- Items rendered here -->
                        </tbody>
                    </table>

                    <div style="padding: 24px;">
                        <div class="order-summary">
                            <div class="summary-content">
                                <div class="summary-row">
                                    <span>Tạm tính:</span>
                                    <span id="subtotal-detail">510.000đ</span>
                                </div>
                                <div class="summary-row">
                                    <span>Phí vận chuyển:</span>
                                    <span id="shipping-fee-detail">30.000đ</span>
                                </div>
                                <div class="summary-row">
                                    <span>Giảm giá (Voucher):</span>
                                    <span id="discount-detail" class="text-success">-0đ</span>
                                </div>
                                <div class="summary-row total">
                                    <span>Tổng cộng:</span>
                                    <span id="total-detail">540.000đ</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>